# ♻️ Recycool Backend

> **폐교 자원을 활용한 예약 기반 공간 대여 플랫폼 – Backend API**

Recycool(리싸이쿨)은  
폐교 시설을 활용하여 장소 및 주차 공간을 예약하고  
일정·상태·위치 정보를 함께 관리하는 **공공 자원 활용 웹 서비스**입니다.

본 레포지토리는 Recycool 서비스의  
**백엔드 API 서버**를 담당합니다.

## 📌 프로젝트 개요

- **프로젝트명**: Recycool
- **개발 기간**: 2024.10 ~ 2024.12 (약 2개월)
- **형태**: 팀 프로젝트 (Frontend / Backend 분리)
- **담당 역할**
  - 예약 도메인 API 설계 및 구현
  - 예약 / 상태 변경 / 조회 로직 개발
  - 캘린더 및 지도 연동을 위한 데이터 제공
  - 프론트엔드 API 연동 지원

## 🛠 기술 스택

- Java 17
- Spring Boot
- Spring MVC
- Spring Data JPA
- Oracle DB
- Spring Security (JWT)
- Gradle

## ✨ 주요 기능

### 📅 예약 관리
- 장소 / 주차 공간 예약 CRUD
- 예약 날짜 및 시간 검증 로직
- 예약 상태 관리 (WAITING / COMPLETED / CANCELED / EXPIRED)
- 예약 유형별 API 분리 설계

### 🏫 학교(공간) 정보
- 학교 기본 정보 조회
- 학교 좌표 정보 제공 (지도 연동)
- 학교 이미지 조회 API 제공

### 🔐 인증 / 권한
- JWT 기반 인증 처리
- 로그인 사용자만 예약 생성 및 상태 변경 가능
- 공용 조회 API와 인증 필요 API 분리

## 🧯 트러블슈팅

### 1. 예약 상태 변경 시 DB 제약조건 오류 발생 문제

- **문제**  
  예약 상태를 변경하는 UPDATE 쿼리 실행 시  
  DB CHECK 제약조건 위반 오류가 발생함

- **원인**  
  DB 컬럼의 상태 값과  
  애플리케이션 Enum 값 간 불일치가 존재함

- **해결**  
  Enum 값과 DB 상태 값을 일치시키고  
  상태 변경 로직에서 Enum 기반으로만 처리하도록 수정함

- **배운 점**  
  Enum을 사용하는 경우  
  **애플리케이션과 DB 간 값 동기화가 매우 중요함**을 인식함

### 2. 예약 유형별 API 처리 과정에서 로직이 복잡해진 문제

- **문제**  
  장소 예약과 주차 예약이 서로 다른 특성을 가지면서  
  하나의 서비스 로직에서 처리되어 가독성과 유지보수성이 저하됨

- **원인**  
  예약 유형별 도메인 차이를 충분히 분리하지 않은 채  
  공통 로직으로 처리하려고 시도함

- **해결**  
  예약 유형을 기준으로  
  서비스 및 API 로직을 분리하여 책임을 명확히 함

- **배운 점**  
  도메인 성격이 다른 기능은  
  **초기 설계 단계에서 분리하는 것이 중요함**을 체감함
